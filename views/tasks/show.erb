<div class="task">
  <h1><%= @task.name %></h1>
  <p>
    <% if @admin %>
    <a class="btn btn-sm btn-primary" href="/tasks/<%= @task.id %>/edit">
      <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
      <span class="button-with-icon-text">Edit</span>
    </a>
    <a class="btn btn-sm btn-danger" data-toggle="modal" data-target="#delete-modal"
       data-name="<%= @task.name %>" data-id="<%= @task.id %>">
      <span class="glyphicon glyphicon-remove"></span>
      <span class="button-with-icon-text">Delete</span>
    </a>
    <% end %>
    <p>
      <a href="/task/<%= @task.id %>/solutions">Submitted solutions</a>
    </p>
  </p>
  <dl>
    <dt>Deadline:</dt>
    <dd><%= I18n.l @task.deadline %></dd>
    <dt>Points:</dt>
    <dd><%= @task.max_points %></dd>
  </dl>
  <% if @task.closed? %>
    <p class="closed">The deadline for submitting solutions has passed.</p>
  <% end %>
  <p><%= GitHub::Markup.render_s(GitHub::Markups::MARKUP_MARKDOWN, @task.description) %></p>
</div>
<!-- Delete task modal -->
<% if @admin %>
<div class="modal fade" id="delete-modal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><%= @task.name %></h4>
      </div>
      <div class="modal-body">
        <p>
          Are you sure you want to delete task with name
          <strong><%= @task.name %></strong>?
        </p>
      </div>
      <div class="modal-footer">
        <form id="confirm-form" method="post" action="/tasks/<%= @task.id %>">
          <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
          <input type="hidden" name="_method" value="delete">
          <button type="submit" class="btn btn-primary">Yes</button>
        </form>
      </div>
    </div>
  </div>
</div>
<% end %>
